import{aR as k,aE as A,d as N,aM as B,aN as y,cF as R,c as _,w as I,b6 as U,aQ as V,a9 as b,cG as $,aT as F,cB as L,cv as K,bc as v,S as O,cH as z,cI as D,r as E,cJ as H,cK as T,cL as j,Q,cM as S,b8 as G}from"./index-181d502b.js";import{c as J}from"./Dropdown-0e86b42f.js";const x=k("n-popselect"),q=A("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),P={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},C=z(P),W=N({name:"PopselectPanel",props:P,setup(e){const o=F(x),{mergedClsPrefixRef:s,inlineThemeDisabled:r}=B(e),h=y("Popselect","-pop-select",q,R,o.props,s),f=_(()=>L(e.options,D("value","children")));function n(t,d){const{onUpdateValue:a,"onUpdate:value":c,onChange:u}=e;a&&v(a,t,d),c&&v(c,t,d),u&&v(u,t,d)}function l(t){i(t.key)}function p(t){K(t,"action")||t.preventDefault()}function i(t){const{value:{getNode:d}}=f;if(e.multiple)if(Array.isArray(e.value)){const a=[],c=[];let u=!0;e.value.forEach(M=>{if(M===t){u=!1;return}const g=d(M);g&&(a.push(g.key),c.push(g.rawNode))}),u&&(a.push(t),c.push(d(t).rawNode)),n(a,c)}else{const a=d(t);a&&n([t],[a.rawNode])}else if(e.value===t&&e.cancelable)n(null,null);else{const a=d(t);a&&n(t,a.rawNode);const{"onUpdate:show":c,onUpdateShow:u}=o.props;c&&v(c,!1),u&&v(u,!1),o.setShow(!1)}O(()=>{o.syncPosition()})}I(U(e,"options"),()=>{O(()=>{o.syncPosition()})});const w=_(()=>{const{self:{menuBoxShadow:t}}=h.value;return{"--n-menu-box-shadow":t}}),m=r?V("select",void 0,w,o.props):void 0;return{mergedTheme:o.mergedThemeRef,mergedClsPrefix:s,treeMate:f,handleToggle:l,handleMenuMousedown:p,cssVars:r?void 0:w,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),b($,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{action:()=>{var o,s;return((s=(o=this.$slots).action)===null||s===void 0?void 0:s.call(o))||[]},empty:()=>{var o,s;return((s=(o=this.$slots).empty)===null||s===void 0?void 0:s.call(o))||[]}})}}),X=Object.assign(Object.assign(Object.assign(Object.assign({},y.props),j(S,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},S.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),P),ee=N({name:"Popselect",props:X,inheritAttrs:!1,__popover__:!0,setup(e){const o=y("Popselect","-popselect",void 0,R,e),s=E(null);function r(){var n;(n=s.value)===null||n===void 0||n.syncPosition()}function h(n){var l;(l=s.value)===null||l===void 0||l.setShow(n)}return G(x,{props:e,mergedThemeRef:o,syncPosition:r,setShow:h}),Object.assign(Object.assign({},{syncPosition:r,setShow:h}),{popoverInstRef:s,mergedTheme:o})},render(){const{mergedTheme:e}=this,o={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(s,r,h,f,n)=>{const{$attrs:l}=this;return b(W,Object.assign({},l,{class:[l.class,s],style:[l.style,h]},H(this.$props,C),{ref:J(r),onMouseenter:T([f,l.onMouseenter]),onMouseleave:T([n,l.onMouseleave])}),{action:()=>{var p,i;return(i=(p=this.$slots).action)===null||i===void 0?void 0:i.call(p)},empty:()=>{var p,i;return(i=(p=this.$slots).empty)===null||i===void 0?void 0:i.call(p)}})}};return b(Q,Object.assign({},j(this.$props,C),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var s,r;return(r=(s=this.$slots).default)===null||r===void 0?void 0:r.call(s)}})}});export{ee as N};
