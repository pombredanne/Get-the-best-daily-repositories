import{_ as R}from"./titleBar.vue_vue_type_script_setup_true_lang-4eb7762b.js";import{d as q,i as z,j as V,l as $,au as F,c as _,r as v,o as U,a as d,b as i,f as r,u as a,n as S,e,m as b,J as C,F as N,p as B,q as M,bG as H,A as W,D as K,t as n,z as Q,_ as X,ax as x,W as j,c8 as Y}from"./index-181d502b.js";const Z={class:"main min-h-[calc(100vh-69px)] bg-white rounded-md mr-[12px] bg-center dark:bg-[#1f1f1f] h-full flex flex-col overflow-hidden"},ee={key:0,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-x-6 gap-y-10 px-4"},te=["onClick"],se={class:"w-full rounded-t-xl overflow-hidden border dark:border-[#404752] dark:border-[#404752] relative",style:{height:"40%"}},ae=["src"],oe={class:"absolute left-1/2 bottom-0 transform -translate-x-1/2 -translate-y-1/2 text-lg text-[#fff] ]"},re={class:"p-5 text-lg h-[160px] border-b dark:border-[#404752] dark:border-[#404752] overflow-hidden relative"},ne={class:"absolute bottom-1 right-2 font-semibold text-red-500 italic"},le={class:"flex p-4 border-b dark:border-[#404752] dark:border-[#404752] flex-col space-y-4"},de={class:"flex justify-between"},ie=e("span",null,"基础模型额度",-1),ce={class:"flex justify-between"},ue=e("span",null,"高级模型额度",-1),pe={class:"flex justify-between"},fe=e("span",null,"MJ绘画额度",-1),he={class:"px-4 flex-1 flex items-center justify-between"},ge={class:"flex items-end"},_e=e("span",null,"套餐有效期 ",-1),xe={class:"ml-2 text-[#3076fd] text-lg"},ye=e("div",{class:"line"},null,-1),ve={key:1,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-x-6 gap-y-10 px-4"},be={class:"w-full rounded-t-xl overflow-hidden",style:{height:"40%"}},me={class:"p-5 text-lg h-[160px] border-b dark:border-[#404752] dark:border-[#404752] overflow-ellipsis"},we={class:"flex p-4 border-b dark:border-[#404752] dark:border-[#404752] flex-col space-y-4"},ke={class:"px-4 flex-1 flex items-center justify-between"},Be=q({__name:"index",setup(Se){const f=z(),{isMobile:c}=V(),y=$(),h=F(),P=_(()=>{var o;const t=window.navigator.userAgent.toLowerCase();return t.match(/MicroMessenger/i)&&((o=t==null?void 0:t.match(/MicroMessenger/i))==null?void 0:o[0])==="micromessenger"}),u=_(()=>{const{payHupiStatus:t,payEpayStatus:o,payMpayStatus:s,payWechatStatus:l}=f.globalConfig;return Number(l)===1?"wechat":Number(s)===1?"mpay":Number(t)===1?"hupi":Number(o)===1?"epay":null}),E=_(()=>{const{payEpayChannel:t,payMpayChannel:o}=f.globalConfig;return u.value==="wechat"?["wxpay"]:u.value==="epay"?t?JSON.parse(t):[]:u.value==="mpay"?o?JSON.parse(o):[]:u.value==="hupi"?["wxpay"]:[]}),m=v([]),w=v(1),p=v(!1);async function k(){try{p.value=!0;const t=await H({status:1,size:30,type:w.value});m.value=t.data.rows,p.value=!1}catch{p.value=!1}}const J=_(()=>c.value?"尽情探索，欢迎光临我们的在线商店！":"尽情探索，欢迎光临我们的在线商店、感谢您选择我们、让我们一同开启愉悦的购物之旅！");function I(t){w.value=t,k()}async function T(t){E.value.length||y.warning("管理员还未开启支付！"),G(t)}async function G(t){if(P.value&&u.value==="wechat"&&Number(f.globalConfig.payWechatStatus)===1){if(typeof WeixinJSBridge>"u")document.addEventListener?document.addEventListener("WeixinJSBridgeReady",g,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",g),document.attachEvent("onWeixinJSBridgeReady",g));else{const o=await Y({goodsId:t.id,payType:"jsapi"}),{success:s,data:l}=o;s&&g(l)}return}h.updateOrderInfo({pkgInfo:t}),h.updateGoodsDialog(!1),h.updatePayDialog(!0)}function g(t){const{appId:o,timeStamp:s,nonceStr:l,package:L,signType:A,paySign:D}=t;o&&WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:o,timeStamp:s,nonceStr:l,package:L,signType:A,paySign:D},O=>{O.err_msg==="get_brand_wcpay_request:ok"?(y.success("购买成功、祝您使用愉快!"),setTimeout(()=>{f.getUserInfo(),h.updateGoodsDialog(!1)},500)):y.warning("您还没有支付成功哟！")})}return U(()=>{k()}),(t,o)=>(d(),i("div",Z,[r(a(R),{title:"会员商场",des:a(J),class:S([a(c)?"px-3":"px-24"])},null,8,["des","class"]),e("div",{class:"flex justify-center items-center",style:C({height:a(c)?"60px":"180px"})},[r(a(K),{type:"segment",style:C({width:a(c)?"90%":"400px"}),"onUpdate:value":I},{default:b(()=>[r(a(W),{name:1,tab:"会员限时套餐"}),r(a(W),{name:-1,tab:"叠加永久次卡"})]),_:1},8,["style"])],4),e("div",{class:S(["flex-1 pb-10 overflow-y-auto",[a(c)?"px-3":"px-28"]])},[p.value?M("",!0):(d(),i("div",ee,[(d(!0),i(N,null,B(m.value,s=>(d(),i("div",{key:s.id,class:"border dark:border-[#404752] dark:border-[#404752] h-[580px] rounded-xl card-item flex flex-col",onClick:l=>T(s)},[e("div",se,[e("img",{src:s.coverImg,class:"object-cover w-full h-full cover",alt:""},null,8,ae),e("div",oe,n(s.name),1)]),e("div",re,[Q(n(s.des)+" ",1),e("span",ne,"￥"+n(s.price),1)]),e("div",le,[e("div",de,[ie,e("span",null,n(s.model3Count||0)+" 积分",1)]),e("div",ce,[ue,e("span",null,n(s.model4Count||0)+" 积分",1)]),e("div",pe,[fe,e("span",null,n(s.drawMjCount||0)+" 积分",1)])]),e("div",he,[e("div",ge,[_e,e("span",xe,n(s.days>0?`${s.days} 天`:"永久"),1)]),ye,e("div",null,[r(a(X),{class:"text-lg right-icon",icon:"bi:arrow-right"})])])],8,te))),128))])),p.value?(d(),i("div",ve,[(d(),i(N,null,B(4,s=>e("div",{key:s,class:"border dark:border-[#404752] dark:border-[#404752] h-[580px] rounded-xl card-item flex flex-col"},[e("div",be,[r(a(x),{height:"100%",width:"100%"})]),e("div",me,[r(a(j),{vertical:""},{default:b(()=>[r(a(x),{text:"",repeat:4,width:"100%",sharp:!1})]),_:1})]),e("div",we,[r(a(j),{vertical:""},{default:b(()=>[r(a(x),{text:"",repeat:4,width:"100%",sharp:!1})]),_:1})]),e("div",ke,[r(a(x),{text:"",repeat:1,width:"100%",sharp:!1})])])),64))])):M("",!0)],2)]))}});export{Be as default};
